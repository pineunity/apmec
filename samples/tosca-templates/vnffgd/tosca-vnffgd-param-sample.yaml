tosca_definitions_version: tosca_simple_profile_for_nfv_1_0_0

description: Sample NFY parameterized template

topology_template:
  description: Sample NFY parameterized template

  inputs:
    net_src_port_id:
        type: string
        description: Port UUID of source VM.

    dst_port_range:
        type: string
        description: Destination port range

    ip_dst_pre:
        type: string
        description: Cidr format of destination ip.

  node_templates:

    Forwarding_path1:
      type: tosca.nodes.nfv.FP.Apmec
      description: creates path (CP12->CP22)
      properties:
        id: 51
        policy:
          type: ACL
          criteria:
            - network_src_port_id: { get_input: net_src_port_id }
            - destination_port_range: { get_input: dst_port_range }
            - ip_proto: 6
            - ip_dst_prefix: { get_input: ip_dst_pre }
        path:
          - forwarder: MEAD1
            capability: CP12
          - forwarder: MEAD2
            capability: CP22

  groups:
    NFY1:
      type: tosca.groups.nfv.NFY
      description: HTTP to Corporate Net
      properties:
        vendor: apmec
        version: 1.0
        number_of_endpoints: 2
        dependent_virtual_link: [VL12,VL22]
        connection_point: [CP12,CP22]
        constituent_meas: [MEAD1,MEAD2]
      members: [Forwarding_path1]
